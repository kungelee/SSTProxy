# SSTProxy
a simple proxy by encryption by rc4

#### golang写的简单正向http代理服务器
+ 采用tcp隧道方式，从tcp层进行数据加密转发，支持http和https

+ 为分客户端和服务端，客户端和服务端采用RC4加密  
+ 本软件的客户端程序直接对tcp数据进行加密转发给服务端，服务端对tcp数据进行http报头解析，然后再转发给目标服务器主机
+ 一个完整的数据流过程
1. 浏览器向代理客户端发起tcp连接
2. 代理客户端接受连接，并向代理服务端请求一个tcp连接。
3. 代理客户端并对浏览器传过来的数据进行rc4加密后传给代理服务端，同时对服务端传回的数据进行rc4解密后传给浏览器
4. 代理服务端接受代理客户端的tcp连接请求，对接收自代理客户端的数据进行解密，并对解密后数据进行http报头解密取得web目标服务器的相关信息
5. 代理服务端根据http报头中得到的web服务器信息向web服务器发起tcp连接请求，连接成功后在web服务器和代理客户端程序之间进行tcp数据包转发。
6. 代理客户端程序对来自代理服务端的数据进行解密后向原浏览器发回数据。
7. 客户端和服务端在发现在一定时间(现在程序写死为5秒)内无数据传输，断开tcp连接

+ 存在问题，压力大时由于大量占用tcp连接，打开网页过多的情况下，linux系统可能会出现文件打开过多错误，需要修改操作系统最大文件打开数量  
方法：  
临时修改  ulimit -n xxxx  
永久修改  修改 /etc/security/limits.conf文件  
追加
* soft nofile xxxx  
* hard nofile xxxx  


#### 使用方法
+ 客户端  
在配置文件（默认为config.json）中配置服务端ip，端口号，密码，及客户端的监听端口号  
启动客户端hpc  
+ 服务端 
在配置文件（默认为config.json）中配置监听端口号及密码  
启动服务端hps  

密码最好弄长一些，可以是包括中文在内的任何字符，但不能超过255个字节。
